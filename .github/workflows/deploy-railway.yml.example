# Deploy to Railway (Free Tier)
#
# Recommended for: Node.js APIs, Backend services
# Free tier: $5/month credit, 500 hours/month
#
# Setup:
# 1. Create account at railway.app
# 2. Create new project
# 3. Get your Railway token from Account Settings
# 4. Add RAILWAY_TOKEN to GitHub Secrets
# 5. Rename this file to deploy-railway.yml

name: Deploy to Railway

on:
  push:
    branches: [main, master]

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Install Railway CLI
        run: npm i -g @railway/cli
      
      - name: Deploy to Railway
        run: railway up
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
      
      - name: Get deployment URL
        id: railway-url
        run: |
          URL=$(railway status --json | jq -r '.deployments[0].url')
          echo "url=$URL" >> $GITHUB_OUTPUT
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
      
      - name: Deployment summary
        run: |
          echo "## ðŸš€ Railway Deployment" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Status:** Deployed successfully" >> $GITHUB_STEP_SUMMARY
          echo "**URL:** ${{ steps.railway-url.outputs.url }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "*Deployed by Railway*" >> $GITHUB_STEP_SUMMARY

